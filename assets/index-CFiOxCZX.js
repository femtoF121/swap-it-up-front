import{r as d,j as e,F as z,c as I,a as M,u as T,b as $,d as V,e as A,f as B,L as G}from"./index-UD_dH3ZA.js";import{B as w,u as Q}from"./index-DMnKym-8.js";import{I as H}from"./index-D6RSYd98.js";import{I as O}from"./index-CtP9EIvt.js";import{L as W}from"./index-YMfG-I4N.js";import{C as f,c as j,a as P}from"./select-options-Co2lB9CI.js";import{u as q}from"./formik.esm-BfZ3xfzO.js";import"./index-CVrtAT_R.js";import"./placeholder-image-BN37adGx.js";const D=({setStars:t,stars:r})=>{const[l,i]=d.useState(-1),n=o=>{const s=[];for(let c=0;c<5;c++)s.push(o>=c);t(s)},m=(o,s)=>l===-1?o?"currentcolor":"transparent":s<=l?"currentcolor":"transparent";return e.jsxs("div",{className:"flex items-center",children:[r.map((o,s)=>e.jsx(z,{style:{fill:m(o,s),cursor:"pointer"},onMouseLeave:()=>i(-1),onMouseEnter:()=>i(s),onClick:()=>n(s)},s)),e.jsx("span",{className:"font-semibold ml-2 text-2xl",children:r.filter(o=>o).length})]})},J=()=>{const[t,r]=d.useState(!1),l=()=>{const n=document.documentElement.scrollTop;n>300?r(!0):n<=300&&r(!1)},i=()=>{window.scrollTo({top:0})};return window.addEventListener("scroll",l),e.jsx(w,{onClick:i,variant:"secondary",className:I("fixed !size-16 !rounded-full bottom-5 right-5 transition-all duration-1000",t?"opacity-70 visible":"opacity-0 invisible"),children:e.jsx(M,{className:"fill-orange400 stroke-transparent rotate-180 absolute inset-2 size-12"})})},te=()=>{const{t}=Q(),[r,{data:l,isLoading:i}]=T(),{data:n}=$(),{data:m,isLoading:o}=V(),{values:s,handleSubmit:c,handleChange:b,setFieldValue:u,resetForm:C}=q({initialValues:{category:[],color:[],wantedCategory:[],search:""},onSubmit:()=>{r({search:h,category:p.map(({value:a})=>a),color:g.map(({value:a})=>a),wantedCategory:x.map(({value:a})=>a)})}}),{search:h,category:p,color:g,wantedCategory:x}=s;d.useEffect(()=>{r({search:h,category:p.map(({value:a})=>a),color:g.map(({value:a})=>a),wantedCategory:x.map(({value:a})=>a)})},[p,g,x]);const[v,N]=d.useState([!1,!1,!1,!1,!1]);return e.jsxs(e.Fragment,{children:[e.jsxs(W,{children:[e.jsx(D,{stars:v,setStars:N}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("h3",{className:"text-2xl font-semibold mb-3 flex items-end gap-10",children:[t("Filters"),(s.category.length>0||s.color.length>0||s.wantedCategory.length>0||s.search)&&e.jsxs("span",{className:"font-[500] text-base flex items-center cursor-pointer hover:text-orange400",onClick:()=>C(),children:[t("clear all"),e.jsx(A,{className:"rotate-45 size-5"})]})]}),e.jsxs("div",{className:"flex gap-8 w-full mx-auto mb-6 items-end flex-wrap justify-between",children:[e.jsxs("div",{className:"flex gap-6 flex-wrap",children:[e.jsx(f,{label:t("Category"),placeholder:t("All"),isMulti:!0,options:j(n,t),onChange:a=>u("category",a),value:s.category,className:"min-w-[200px]"}),e.jsx(f,{label:t("Color"),placeholder:t("All"),isMulti:!0,options:P(m,t),onChange:a=>u("color",a),value:s.color,className:"min-w-[200px]"}),e.jsx(f,{label:t("Wanted categories"),placeholder:t("All"),isMulti:!0,options:j(n,t),onChange:a=>u("wantedCategory",a),value:s.wantedCategory,className:"min-w-[200px]"})]}),e.jsxs("div",{className:"flex max-w-[500px] min-w-[300px] w-full gap-4 h-[48px]",children:[e.jsx(O,{type:"text",name:"search",className:"shrink",inputClassName:"!border-orange100 border-[2px] !h-full",placeholder:t("What are you looking for?"),onChange:b,value:s.search}),e.jsx(w,{type:"submit",variant:"secondary",className:"shrink-0 font-semibold !bg-orange50 !p-[12px]",children:e.jsx(B,{})})]})]})]}),!l||i||o?e.jsx(G,{className:"mx-auto mt-10"}):e.jsx("div",{className:"items-grid",children:l.list.map(({id:a,name:S,description:F,category:L,wantedCategory:k,pictureIds:y,color:E})=>e.jsx(H,{id:a,img:y[0]?`https://apim-swapitup.azure-api.net/api/items/pictures/${y[0]}`:"",title:S,category:L,description:F,wanted:k,color:m.list.find(({name:R})=>R===E)},a))})]}),e.jsx(J,{})]})};export{te as default};
