import{r as m,j as e,c as u,a8 as y,d as v,i as n,R as s,g as S,a9 as b,L as E,aa as M,ab as h,ac as C,F as L,K as T,M as _,k as A}from"./index-BGThfT-j.js";import{u as N,a as g,L as I,B as k}from"./index-pm85f2wt.js";const D=({className:c,userName:d,withAuth:r,isAdmin:l=!1})=>{const[t,a]=m.useState(!1),{t:o}=N(),x=()=>{a(!0)},i=()=>{a(!1)};return m.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]),e.jsxs("div",{className:u("",c),children:[e.jsx(y,{className:"size-10 cursor-pointer",onClick:x}),e.jsxs("div",{className:u("absolute z-[100] top-0 right-0 w-screen h-screen duration-300 transition-all overflow-hidden",t?"translate-x-0":"translate-x-full"),children:[e.jsx("div",{className:u("h-full w-full bg-white400/20",t?"visible  delay-300":"invisible"),onClick:i,onTouchStart:i}),e.jsxs("div",{className:"w-[300px] ml-auto bg-white100 h-full p-6 absolute top-0 right-0 text-teal600 text-3xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-12",children:[e.jsx(g,{highlightColor:"text-teal400"}),e.jsx(v,{className:"rotate-45 text-white400 size-10 ml-auto",onClick:i})]}),e.jsx("div",{className:" flex flex-col gap-6",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-teal400",children:[o("Hello"),", ",d,"!"]}),l?e.jsx(n,{to:s.ADMIN,children:o("Admin controls")}):e.jsxs(e.Fragment,{children:[e.jsx(n,{to:s.MY_ITEMS,children:o("My items")}),e.jsx(n,{to:s.MY_DEALS,children:o("My deals")}),e.jsx(n,{to:s.CHATS,children:o("Chat")})]}),e.jsx(n,{to:s.SETTINGS,children:o("Settings")}),e.jsx("hr",{className:"h-px w-full bg-teal600 my-2"}),e.jsx(n,{to:s.SIGN_IN,children:o("Log out")})]}):e.jsxs(e.Fragment,{children:[e.jsx(n,{to:s.SIGN_IN,children:o("Sign In")}),e.jsx(n,{to:s.SIGN_UP,children:o("Sign Up")})]})})]})]})]})},f={mobile:{max:"599px"},tablet:{min:"600px",max:"1279px"},desktop:{min:"1280px"}},F=()=>{const[c,d]=m.useState({mobile:!1,tablet:!1,desktop:!1});return m.useEffect(()=>{const r=()=>{const l=Math.min(document.documentElement.clientWidth,window.innerWidth||0),t={mobile:l<=parseInt(f.mobile.max),tablet:l<=parseInt(f.tablet.max),desktop:l>=parseInt(f.desktop.min)};d(t)};return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),c},G=({withAuth:c,name:d,isLoading:r,isAdmin:l,className:t})=>{const{t:a}=N(),{mobile:o,tablet:x}=F(),i=S(),[j]=b();return e.jsxs("header",{className:u("bg-teal200 text-white100 rounded-b-[1rem] py-4 px-8 w-full flex justify-between items-center",t),children:[e.jsxs("div",{className:"gap-8 flex items-center",children:[e.jsx(I,{})," ",c&&!r&&e.jsx(k,{voluminous:!0,size:"sm",className:u("!text-[1.5rem] !h-[3rem] mobile:px-4",{"below-768:hidden":l}),onClick:()=>{i(l?s.ADMIN:s.ADD_ITEM)},children:l?a("Admin controls"):x?e.jsx(v,{strokeWidth:"3"}):a("Add item")})]}),r?e.jsx(E,{className:"ml-auto !size-10"}):o?e.jsx(D,{withAuth:c,userName:d,isAdmin:l}):e.jsx("nav",{className:"flex gap-8 text-[1.5rem] items-center",children:c?e.jsxs(e.Fragment,{children:[!x&&!l&&e.jsxs(n,{to:s.CHATS,className:"flex gap-2 items-center hover:text-teal600 hover:no-underline group hover:cursor-pointer",children:[e.jsx(M,{className:"group-hover:stroke-teal600"}),a("Chat")]}),e.jsx(g,{}),e.jsxs(h,{children:[e.jsxs(h.Target,{className:"flex gap-2 items-center hover:no-underline group hover:cursor-pointer",children:[e.jsx(C,{className:"group-hover:stroke-teal600"}),e.jsx("span",{className:"group-hover:text-teal600",children:a("Account")}),e.jsx(L,{className:"group-hover:stroke-teal600"})]}),e.jsxs(h.List,{children:[e.jsxs("span",{className:"text-[1.5rem] text-teal400 mb-4 px-6",children:[a("Hello"),", ",d,"!"]}),!l&&e.jsxs(e.Fragment,{children:[e.jsx(h.Item,{onClick:()=>window.location.href=s.MY_ITEMS,children:a("My items")}),e.jsx(h.Item,{onClick:()=>window.location.href=s.MY_DEALS,children:a("My deals")}),e.jsx(h.Item,{onClick:()=>window.location.href=s.CHATS,children:a("Chat")})]}),e.jsx(h.Item,{onClick:()=>window.location.href=s.SETTINGS,children:a("Settings")}),e.jsx("hr",{className:"h-px w-full bg-teal600 my-2"}),e.jsx(h.Item,{onClick:()=>{j(),i(s.SIGN_IN)},children:a("Log out")})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{})," ",e.jsxs("div",{className:"hover:[&>*]:no-underline hover:[&>*]:text-teal600",children:[e.jsx(n,{to:s.SIGN_IN,children:a("Sign In")})," | ",e.jsx(n,{to:s.SIGN_UP,children:a("Sign Up")})]})]})})]})},R=({className:c,withAuth:d,isAdmin:r=!1,...l})=>{const{t}=N(),a=S(),[o]=b(),[x,i]=m.useState(null);m.useEffect(()=>{const p=w=>{w.preventDefault(),i(w)};return window.addEventListener("beforeinstallprompt",p),()=>window.removeEventListener("beforeinstallprompt",p)},[]);const j=async()=>{x&&(console.log(x),x.prompt())};return e.jsxs("footer",{className:u("py-8",c),...l,children:[e.jsxs("div",{className:"flex justify-between mobile:flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx(I,{className:"text-[1.5rem] !text-teal600"}),d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-4 mb-2 mt-4 flex-wrap font-semibold",children:[r?e.jsx(n,{to:s.ADMIN,className:"text-orange400",children:t("Admin controls")}):e.jsxs(e.Fragment,{children:[e.jsx(n,{to:s.SETTINGS,children:t("Account")}),e.jsx(n,{to:s.CHATS,children:t("Chat")}),e.jsx(n,{to:s.ADD_ITEM,className:"text-orange400",children:t("Add item")})]}),e.jsx("div",{onClick:()=>{o(),a(s.SIGN_IN)},className:"cursor-pointer hover:underline decoration-[1.5px]",children:t("Log out")})]}),e.jsxs("div",{className:"text-white400 flex flex-col gap-2",children:[!r&&e.jsxs(e.Fragment,{children:[e.jsx(n,{to:s.MY_DEALS,children:t("My deals")}),e.jsx(n,{to:s.MY_ITEMS,children:t("My items")})]}),e.jsx(n,{to:s.SETTINGS,children:t("Settings")})]})]}):e.jsxs("div",{className:"flex gap-4 text-white200 mb-2 mt-4 ",children:[e.jsx(n,{to:s.SIGN_UP,className:"text-orange400",children:t("Sign Up")}),e.jsxs("span",{children:["Have an account? ",e.jsx(n,{to:s.SIGN_IN,className:"text-orange400",children:t("Sign In")})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 items-end mobile:items-start text-white200",children:[t("Like to use mobile version?"),e.jsx(k,{onClick:j,size:"sm",variant:"secondary",className:"!py-2 font-semibold",voluminous:!0,children:t("Get our app")})]})]}),e.jsx("hr",{className:"w-full h-px bg-white200 border-0 my-4"}),e.jsx("p",{className:"text-white200 text-[0.75rem]",children:"© 2024 Swap It Up"})]})},z={email:"admin@gmail.com"},U=({children:c,className:d})=>{const[r,l]=m.useState(),{data:t,isLoading:a,isSuccess:o,refetch:x}=T(),{data:i,refetch:j}=_(),p=A();return m.useEffect(()=>{x()},[p]),m.useEffect(()=>{i&&l(i.email===z.email),j()},[i,l]),e.jsxs("div",{className:"home-container relative overflow-hidden flex flex-col min-h-screen gap-8",children:[e.jsx(G,{isAdmin:r,withAuth:o,name:t==null?void 0:t.name,isLoading:a}),e.jsx("main",{className:u("flex-1",d),children:c}),e.jsx(R,{isAdmin:r,withAuth:o})]})};export{z as A,U as L};
